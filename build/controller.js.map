{"version":3,"sources":["../src/controller.js"],"names":["reviewerAdded","req","res","body","comment","pullrequest","result","service","parseRequestBody","isReviewRequest","users","repository","readUsersByBitbucketId","reviewerIds","sendMessageToAllReviewers","commenterName","status","json"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,eAAeA,aAAf,CAA6BC,GAA7B,EAAkCC,GAAlC,EAAuC;AACnC,QAAMC,IAAI,GAAG,mCAAuBF,GAAG,CAACE,IAA3B,CAAb;AACA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAA2BF,IAAjC;;AAEA,MAAIC,OAAJ,EAAa;AACT,UAAME,MAAM,GAAGC,iBAAQC,gBAAR,CAAyBJ,OAAzB,EAAkCC,WAAlC,CAAf;;AAEA,QAAIC,MAAM,CAACG,eAAX,EAA4B;AACxB,YAAMC,KAAK,GAAG,MAAMC,oBAAWC,sBAAX,CAChBN,MAAM,CAACO,WADS,CAApB;;AAIAN,uBAAQO,yBAAR,CACIJ,KADJ,EAEIL,WAFJ,EAGIC,MAAM,CAACS,aAHX;;AAMA,aAAOb,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBX,MAArB,CAAP;AACH;AACJ;;AAED,SAAOJ,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAArB,CAAP;AACH","sourcesContent":["import { convertKeysToCamelCase } from \"./utils\";\nimport repository from \"./repository\";\nimport service from \"./service\";\n\nasync function reviewerAdded(req, res) {\n    const body = convertKeysToCamelCase(req.body);\n    const { comment, pullrequest } = body;\n\n    if (comment) {\n        const result = service.parseRequestBody(comment, pullrequest);\n\n        if (result.isReviewRequest) {\n            const users = await repository.readUsersByBitbucketId(\n                result.reviewerIds\n            );\n\n            service.sendMessageToAllReviewers(\n                users,\n                pullrequest,\n                result.commenterName\n            );\n\n            return res.status(200).json(result);\n        }\n    }\n\n    return res.status(204).json({});\n}\n\nexport { reviewerAdded };\n"],"file":"controller.js"}